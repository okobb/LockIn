users
‚Ä¢	id : BIGSERIAL, Primary key for user identity. 
‚Ä¢	email : VARCHAR(255), Unique identifier for login and notifications. 
‚Ä¢	password : VARCHAR(255), Secure authentication hash. 
‚Ä¢	name : VARCHAR(255), User's display name. 
‚Ä¢	tier : VARCHAR(20), Renders "Free Plan" / "Upgrade to Pro" in dashboard.html sidebar. 
‚Ä¢	preferences : JSONB, Stores UI settings like "Focus Mode" duration (25/45/90 min options in tasks.html). Expected keys: default_timer_min, auto_save_before_meetings, update_slack_status, browser_push_enabled, daily_briefing_reminder, daily_briefing_time, eod_save_prompt, eod_save_time, proactive_suggestions, liquid_scheduler_enabled. 
‚Ä¢	urgent_keywords : TEXT[], User-defined bypass keywords for Focus Mode (e.g., ['urgent', 'blocking', 'prod down', 'p0']) shown in SettingsAndIntegrations.html. 
‚Ä¢	timezone : VARCHAR(50), Required for calendar gap detection and scheduling in dashboard.html timeline. 
‚Ä¢	created_at : TIMESTAMPTZ, Account creation timestamp. 
‚Ä¢	updated_at : TIMESTAMPTZ, Last update timestamp. 
indexes: idx_users_email 
integrations
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	provider : VARCHAR(50), Provider list (slack, github, google_calendar) matches integration cards in SettingsAndIntegrations.html. 
‚Ä¢	provider_id : VARCHAR(255), External user ID (e.g., Slack Member ID) for webhook correlation. 
‚Ä¢	access_token : TEXT, Encrypted OAuth access token for API calls (fetching PRs, messages). 
‚Ä¢	refresh_token : TEXT, Encrypted refresh token for token renewal without re-auth. 
‚Ä¢	scopes : JSONB, Tracks granted permissions (e.g., ["repo:read", "chat:write"]). 
‚Ä¢	expires_at : TIMESTAMPTZ, Token expiry for proactive refresh. 
‚Ä¢	is_active : BOOLEAN, Toggle for enabling/disabling integration. 
indexes: idx_integrations_user_provider 
context_snapshots
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	title : VARCHAR(255), Renders as context card title(e.g., "Refactor User Authentication Flow"). 
‚Ä¢	type : VARCHAR(20), Drives "Manual Save" vs "Interruption" tag filter. 
‚Ä¢	git_diff_blob : TEXT, Raw uncommitted changes displayed in dashboard code preview (e.g., "app/Http/... (+23, -15)"). 
‚Ä¢	git_branch : VARCHAR(255), Displays "Branch: feature/oauth-refactor" in focus mode  Git Context card. 
‚Ä¢	git_last_commit : VARCHAR(255), Shows "Last commit: 'WIP: initial middleware setup'" in focus mode. 
‚Ä¢	repository_source : VARCHAR(255), Identifies which repo the diff belongs to (multi-repo support). 
‚Ä¢	browser_state : JSONB, Array of open tabs restored in tasks.html "Restored Tabs" card. 
‚Ä¢	ide_state : JSONB, Future VSCode deep links - stores file path + line number. 
‚Ä¢	voice_memo_path : VARCHAR(512), S3 path to recorded audio, enables playback in dashboard.html voice player. 
‚Ä¢	voice_duration_sec : INTEGER, Duration of voice memo in seconds, displays as "0:45" in dashboard.html voice player. 
‚Ä¢	voice_recorded_at : TIMESTAMPTZ, Timestamp when voice memo was recorded, displays as "Recorded Yesterday 5:47 PM" in tasks.html. 
‚Ä¢	voice_transcript : TEXT, Whisper-transcribed text shown in tasks.html "Voice Memo Recap" card. 
‚Ä¢	text_note : TEXT, Alternative to voice - typed quick summary. 
‚Ä¢	ai_resume_checklist : JSONB, AI-generated next steps shown in tasks.html "Mission Checklist". 
‚Ä¢	git_files_changed : JSONB, Structured array of file changes for UI display (e.g., [{"file": "AuthController.php", "additions": 23, "deletions": 15}]). 
‚Ä¢	quality_score : INTEGER, Calculated (0-100) context richness score based on completeness of captured data (Added via Quick Win feature). 
‚Ä¢	created_at : TIMESTAMPTZ DEFAULT NOW(), Context creation timestamp, displays time in ContextHistory.html cards. 
‚Ä¢	restored_at : TIMESTAMPTZ, Tracks when context was restored (for "time saved" calculation). 
‚Ä¢	focus_session_id : BIGINT, Links snapshot to the focus session that triggered it. 
‚Ä¢	searchable_text : TSVECTOR, Full-text search for context history search input. 
indexes: idx_context_snapshots_user, idx_context_snapshots_created, idx_context_snapshots_type, idx_context_snapshots_search 
focus_sessions
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	task_id : BIGINT, Links to task being worked on (e.g., "Refactor User Authentication" in focus sessions). 
‚Ä¢	title : VARCHAR(255), Mission title shown in tasks.html header. 
‚Ä¢	planned_duration_min : INTEGER, Initial timer duration (25/45/90 min options). 
‚Ä¢	actual_duration_min : INTEGER, Final duration for flow time calculation in ProgressStats.html. 
‚Ä¢	started_at : TIMESTAMPTZ, Session start time. 
‚Ä¢	ended_at : TIMESTAMPTZ, Session end time. 
‚Ä¢	paused_duration_sec : INTEGER, Tracks time spent paused (for accurate "Flow Time" in dashboard). 
‚Ä¢	status : VARCHAR(20), Determines timer display state and progress bar in focus session. 
‚Ä¢	checklist_completed : INTEGER, Renders "0 of 4 complete" in focus session checklist header. 
‚Ä¢	checklist_total : INTEGER, Total items in checklist. 
‚Ä¢	context_snapshot_id : BIGINT, Links focus session to the context it restored from. 
indexes: idx_focus_sessions_user, idx_focus_sessions_date, idx_focus_sessions_status 
checklist_items
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	focus_session_id : BIGINT, Required for granular tracking of focus session  "Mission Checklist" items. 
‚Ä¢	context_snapshot_id : BIGINT, Optional link to snapshot. 
‚Ä¢	text : TEXT, Checklist item text (e.g., "Check session.php configuration"). 
‚Ä¢	meta : TEXT, Secondary text shown below item (e.g., "config/session.php ‚Ä¢ You changed cookie lifetime"). 
‚Ä¢	is_completed : BOOLEAN, Tracks checkbox state, strikethrough styling in tasks.html. 
‚Ä¢	completed_at : TIMESTAMPTZ, Timestamp of completion. 
‚Ä¢	sort_order : INTEGER, Maintains item order as displayed in UI. 
‚Ä¢	source : VARCHAR(20), Distinguishes AI-generated items from manually added ones. 
indexes: idx_checklist_items_session, idx_checklist_items_snapshot 
daily_stats
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	date : DATE, The date for the stats record. 
‚Ä¢	flow_time_min : INTEGER, Renders "Flow Time: 4h 30m" in dashboard.html. 
‚Ä¢	deep_work_blocks : INTEGER, Renders "Deep Work Blocks: 2" in dashboard.html. 
‚Ä¢	contexts_saved : INTEGER, Renders "Contexts Saved: 3" in dashboard.html. 
‚Ä¢	contexts_restored : INTEGER, Tracks restoration count. 
‚Ä¢	tasks_completed : INTEGER, Renders "Tasks Done: 7" in dashboard.html. 
‚Ä¢	checklist_items_completed : INTEGER, Count of checklist items finished. 
‚Ä¢	notifications_blocked : INTEGER, Historical tracking for notification efficiency. 
‚Ä¢	notifications_allowed : INTEGER, Historical tracking for notification efficiency. 
‚Ä¢	estimated_time_saved_min : INTEGER DEFAULT 0, Cumulative time saved by context restorations, displays as "Time Saved: 34h" in ContextHistory.html. 
indexes: idx_daily_stats_user_date 
knowledge_resources
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	url : TEXT, Source URL, unique per user. 
‚Ä¢	title : VARCHAR(512), Article/video title shown in suggestion cards. 
‚Ä¢	summary : TEXT, AI-generated summary for quick preview. 
‚Ä¢	metadata : JSONB, Stores RAG-relevant metadata (complexity, reading_time_min, topics, prerequisites). 
‚Ä¢	content_text : TEXT, Scraped/extracted text content for embedding generation. 
‚Ä¢	is_read : BOOLEAN, Tracks if user has consumed this content. 
‚Ä¢	is_archived : BOOLEAN, Archive status. 
indexes: idx_knowledge_resources_user, idx_knowledge_resources_unread 
knowledge_embeddings
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	resource_id : BIGINT, Links to knowledge_resources table. 
‚Ä¢	chunk_index : INTEGER, Maintains reading order for multi-chunk documents. 
‚Ä¢	content_chunk : TEXT, The actual text snippet being embedded. 
‚Ä¢	embedding : VECTOR(1536), text-embedding-3-small produces 1536-dim vectors. 
indexes: idx_embeddings_resource, idx_embeddings_vector 
incoming_messages
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	provider : VARCHAR(50), Source provider (slack, email). 
‚Ä¢	external_id : VARCHAR(255), Unique message ID for deduplication. 
‚Ä¢	sender_info : VARCHAR(255), Sender details. 
‚Ä¢	channel_info : VARCHAR(255), Channel details. 
‚Ä¢	content_raw : TEXT, The message body. 
‚Ä¢	processed_at : TIMESTAMPTZ, NULL = needs processing, non-NULL = already analyzed. 
‚Ä¢	extracted_task_id : BIGINT, Link to a task if one was created. 
‚Ä¢	focus_session_id : BIGINT, Focus Mode Filtering .
‚Ä¢	was_allowed : BOOLEAN, NULL = not during focus, true/false = filtered. 
‚Ä¢	decision_reason : TEXT, Reasoning like "Contains 'prod' + 'down' - critical". 
‚Ä¢	urgency_score : DECIMAL(3,2), AI calculated urgency score. 
‚Ä¢	extracted_action : TEXT, AI-extracted action item (e.g., "Review PR #245"). 
‚Ä¢	received_at : TIMESTAMPTZ DEFAULT NOW(), Message receive timestamp, displays as "2m ago" in dashboard.html communications. 
indexes: idx_incoming_messages_user, idx_incoming_messages_unprocessed, idx_messages_dedupe, idx_messages_focus_session, idx_messages_recent, idx_messages_urgent 
+4
calendar_events
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	external_id : VARCHAR(255), Google Calendar Event ID for sync. 
‚Ä¢	title : VARCHAR(512), "Team Standup", "Client Sync" shown in dashboard.html timeline. 
‚Ä¢	start_time : TIMESTAMPTZ, Event start time. 
‚Ä¢	end_time : TIMESTAMPTZ, Event end time ("10:00 - 10:30" range shown in timeline). 
‚Ä¢	status : VARCHAR(20), 'confirmed', 'cancelled', 'tentative'. 
‚Ä¢	auto_save_enabled : BOOLEAN, "Auto-save context" text in dashboard.html meeting blocks. 
‚Ä¢	metadata : JSONB, Stores attendees, location, description for prep reminders. 
indexes: idx_calendar_events_user, idx_calendar_events_time 
tasks
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	title : VARCHAR(512), "Fix Critical Auth Bug" shown in dashboard.html task card. 
‚Ä¢	description : TEXT, Task details. 
‚Ä¢	priority : INTEGER, 1=highest, used to sort "Morning Mission Brief". 
‚Ä¢	status : VARCHAR(20), Tracks task lifecycle (pending, in_progress, done). 
‚Ä¢	source_type : VARCHAR(50), 'slack', 'github_pr', 'manual' - determines icon and link. 
‚Ä¢	source_link : TEXT, Deep link to Slack thread or GitHub PR ("View PR" button in dashboard.html). 
‚Ä¢	source_metadata : JSONB, PR number, channel name, etc. 
‚Ä¢	ai_reasoning : TEXT, "Sarah mentioned this 3x in Slack. Blocking deploy." shown in dashboard.html. 
‚Ä¢	due_date : DATE, Task deadline. 
‚Ä¢	estimated_minutes : INTEGER, "~2h" estimate shown in backlog items. 
‚Ä¢	scheduled_start : TIMESTAMPTZ, When dragged to timeline slot in dashboard.html. 
‚Ä¢	scheduled_end : TIMESTAMPTZ, End of timeline slot. 
‚Ä¢	progress_percent : INTEGER, "60% Complete" badge in ProgressStats.html mission card. 
‚Ä¢	completed_at : TIMESTAMPTZ, Timestamp of task completion. 
indexes: idx_tasks_user, idx_tasks_status, idx_tasks_priority, idx_tasks_scheduled 

read_later_queue
‚Ä¢	id : BIGSERIAL, Primary key. 
‚Ä¢	user_id : BIGINT, Links to the users table. 
‚Ä¢	resource_id : BIGINT, Links to knowledge_resources table. 
‚Ä¢	estimated_minutes : INTEGER, Content duration for gap matching (e.g., "12 min read"). 
‚Ä¢	context_match : TEXT, AI reasoning like "Related to your current React task". 
‚Ä¢	scheduled_for : TIMESTAMPTZ, When Liquid Scheduler has booked this item. 
‚Ä¢	gap_type : VARCHAR(20), 'commute', 'meeting_gap', 'evening' for content format matching. 
‚Ä¢	is_completed : BOOLEAN, Completion status. 
‚Ä¢	started_at : TIMESTAMPTZ, Start timestamp. 
‚Ä¢	completed_at : TIMESTAMPTZ, Completion timestamp. 
indexes: idx_read_later_user, idx_read_later_scheduled 
-- Trigger for auto-updating daily stats
CREATE TRIGGER trigger_update_daily_stats
    AFTER UPDATE OF status ON focus_sessions
    FOR EACH ROW
    WHEN (NEW.status = 'completed' AND OLD.status != 'completed')
    EXECUTE FUNCTION update_daily_stats_after_focus_session();
________________________________________
Part 2: "Quick Win" Feature Proposal
Feature: Context Quality Score
A lightweight scoring system that rates each saved context based on completeness, helping users understand the value of their cognitive snapshots.
Why This Feature?
1.	Not in Core Features - Not explicitly listed in "Three Core Features" section
2.	Highly Relevant - Aligns perfectly with "Cognitive Command Center" theme by quantifying cognitive state capture quality
3.	Uses Existing Data - Leverages already-captured fields: voice_transcript, git_diff_blob, browser_state, ai_resume_checklist
What It Does
Calculates a 0-100 "Context Richness Score" based on:
Component	Points	Rationale
Git diff captured	+25	Code state is core to resumption
Browser tabs saved (‚â•3)	+20	Research context preservation
Voice memo recorded	+30	User's own context is most valuable
AI checklist generated	+15	Actionable next steps ready
Titled by user	+10	User took time to name the context
UI Integration
‚Ä¢	Shows as a small badge on each context card in 
ContextHistory.html
‚Ä¢	Example: "üèÜ Quality: 95/100" on cards with complete context
‚Ä¢	Encourages users to record voice memos (highest point value)
Technical Implementation (<48 hours)
-- Add computed column (can be generated on read)
ALTER TABLE context_snapshots 
ADD COLUMN quality_score INTEGER GENERATED ALWAYS AS (
    (CASE WHEN git_diff_blob IS NOT NULL AND git_diff_blob != '' THEN 25 ELSE 0 END) +
    (CASE WHEN jsonb_array_length(browser_state) >= 3 THEN 20 ELSE 0 END) +
    (CASE WHEN voice_transcript IS NOT NULL AND voice_transcript != '' THEN 30 ELSE 0 END) +
    (CASE WHEN jsonb_array_length(ai_resume_checklist) > 0 THEN 15 ELSE 0 END) +
    (CASE WHEN title IS NOT NULL AND title != '' THEN 10 ELSE 0 END)
) STORED;
Dev Time Estimate: 6-8 hours
‚Ä¢	2h: Add column and migrate
‚Ä¢	2h: Update API to include score
‚Ä¢	2h: Add badge to ContextHistory.html cards
‚Ä¢	2h: Add tooltip explaining score breakdown
________________________________________
Part 3: 30-Day MVP Feature Roadmap
Constraint: Total dev time must not exceed 30 days. Features are prioritized by core value proposition impact.
Prioritized Feature Table
#	Feature Name	Priority	Est. Days	Justification
WEEK 1: Core Briefing				
1	User Auth (Clerk)	P0	1	Foundation - required for all other features
2	GitHub OAuth + Repo Selection	P0	1.5	Enables core "Context Restoration" with code diffs
3	Git Diff Extraction & Display	P0	2	Core value prop - "Where was I?" with syntax highlighting
4	Basic Dashboard UI	P0	1.5	Single-page brief of daily priorities (dashboard.html)
5	Calendar Integration (Read-Only)	P1	1	"Today's Schedule" timeline in dashboard.html
	Subtotal		7 days	
WEEK 2: Context Save/Restore				
6	Chrome Extension (Tab Capture)	P0	2	"Lock In" button captures browser state
7	Context Snapshot Save API	P0	1	Backend storage for context_snapshots table
8	Context Restore Flow	P0	2	ContextRestore.html - restores tabs + shows diff
9	Context History Page	P1	1	ContextHistory.html - timeline of saved contexts
10	Basic Notification Push	P1	1	Web Push API for urgent alerts
	Subtotal		7 days	
WEEK 3: Voice + AI Synthesis				
11	Voice Memo Recording (Browser API)	P0	1.5	MediaRecorder in Chrome extension
12	Whisper Transcription Integration	P0	1	n8n workflow: audio ‚Üí transcription
13	AI Resume Checklist Generation	P0	2	GPT-4o-mini: diff + transcript ‚Üí checklist
14	Focus Mode Timer UI	P0	1.5	tasks.html - Pomodoro timer with pause/resume
15	Checklist Items CRUD	P1	1	Add/complete items in Mission Checklist
	Subtotal		7 days	
WEEK 4: Knowledge Layer Lite + Polish				
16	Save URL Feature	P1	1	Basic URL saving with metadata extraction
17	RAG Lite (Keyword Search)	P2	2	Keyword matching instead of full embeddings
18	Proactive Suggestion Card	P1	1	"You saved X article..." on dashboard.html
19	Daily Stats Aggregation	P1	1	Flow Time, Deep Work Blocks tracking
20	Slack Integration (Basic)	P1	2	Read @mentions for priority extraction
21	Onboarding + Landing Polish	P1	1	OnBoarding.html, landing.html refinement
22	Context Quality Score	P2	0.5	Quick win feature from Part 2
	Subtotal		8.5 days	
Total: 29.5 days ‚úÖ
________________________________________
"RAG Lite" Note
Full RAG with pgvector embeddings is scoped at ~5-6 days (embedding generation, vector indexing, semantic search). For the MVP, I recommend "RAG Lite":
Full RAG	RAG Lite
OpenAI embeddings	PostgreSQL trigram search
pgvector similarity	Keyword + metadata matching
Semantic "similar concepts"	Exact topic tag matching
~5-6 days	~2 days
This delivers 80% of the value by leveraging AI-extracted metadata.topics for matching without the embedding pipeline overhead. Full RAG can be added in Month 2.
________________________________________
Summary
What Was Created
1.	Complete PostgreSQL schema with 13 tables supporting all UI requirements
2.	4 new tables to fill gaps: focus_sessions, checklist_items, daily_stats, notification_logs
3.	7 columns added via Gap Analysis: users.urgent_keywords, context_snapshots.created_at, context_snapshots.voice_duration_sec, context_snapshots.voice_recorded_at, context_snapshots.git_files_changed, daily_stats.estimated_time_saved_min, incoming_messages.received_at
4.	Quick Win feature: Context Quality Score (6-8 hours)
5.	30-day MVP roadmap totaling 29.5 days with P0-P2 prioritization
Key Design Decisions
‚Ä¢	JSONB flexibility for evolving schema (browser_state, metadata, preferences)
‚Ä¢	Denormalized daily_stats for efficient dashboard rendering
‚Ä¢	RAG Lite to ship knowledge feature without full embedding pipeline
‚Ä¢	Trigger-based stats updates to maintain data consistency
IMPORTANT
The schema supports the "Senior Engineer Persona" through the knowledge_embeddings table with pgvector, but the full semantic search implementation is deferred to post-MVP per the roadmap constraints.

